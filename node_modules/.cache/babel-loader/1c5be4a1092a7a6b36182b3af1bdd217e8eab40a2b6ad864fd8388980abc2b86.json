{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withCtx as _withCtx, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container mt-10\"\n};\nconst _hoisted_2 = {\n  class: \"row justify-content-center\"\n};\nconst _hoisted_3 = {\n  class: \"col-md-4 col-xl-3\"\n};\nconst _hoisted_4 = {\n  class: \"card bg-c-blue order-card\"\n};\nconst _hoisted_5 = {\n  class: \"card-block\"\n};\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"h6\", {\n  class: \"m-b-20\"\n}, \"Total restaurant\", -1 /* HOISTED */);\nconst _hoisted_7 = {\n  class: \"text-right\"\n};\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa fa-cart-plus f-left\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_9 = {\n  class: \"container\"\n};\nconst _hoisted_10 = {\n  class: \"table\"\n};\nconst _hoisted_11 = {\n  class: \"table-dark\"\n};\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"th\", {\n  style: {\n    \"border-top-left-radius\": \"15px 15px\"\n  },\n  scope: \"col\"\n}, \"#\", -1 /* HOISTED */);\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"th\", {\n  scope: \"col\"\n}, \"Action\", -1 /* HOISTED */);\nconst _hoisted_14 = {\n  key: 0\n};\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = {\n  key: 1\n};\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"tr\", {\n  class: \"no-records-found\"\n}, [/*#__PURE__*/_createElementVNode(\"td\", {\n  colspan: \"5\"\n}, \"No matching records found\")], -1 /* HOISTED */);\nconst _hoisted_18 = [_hoisted_17];\nconst _hoisted_19 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Header = _resolveComponent(\"Header\");\n  const _component_confirm_dialogue = _resolveComponent(\"confirm-dialogue\");\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_Header), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _createElementVNode(\"h2\", _hoisted_7, [_hoisted_8, _createElementVNode(\"span\", null, _toDisplayString($data.restaurant.length), 1 /* TEXT */)])])])])])]), _createVNode(_component_confirm_dialogue, {\n    ref: \"confirmDialogue\"\n  }, null, 512 /* NEED_PATCH */), _createElementVNode(\"div\", null, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.searchQuery = $event),\n    placeholder: \"Search\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.searchQuery]])]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"table\", _hoisted_10, [_createElementVNode(\"thead\", _hoisted_11, [_createElementVNode(\"tr\", null, [_hoisted_12, _createElementVNode(\"th\", {\n    onClick: _cache[1] || (_cache[1] = $event => $options.sortBy('name')),\n    scope: \"col\"\n  }, \"Name\"), _createElementVNode(\"th\", {\n    onClick: _cache[2] || (_cache[2] = $event => $options.sortBy('contact')),\n    scope: \"col\"\n  }, \"Contact\"), _createElementVNode(\"th\", {\n    onClick: _cache[3] || (_cache[3] = $event => $options.sortBy('address')),\n    scope: \"col\"\n  }, \"Address\"), _hoisted_13])]), $options.filteredItems.length > 0 ? (_openBlock(), _createElementBlock(\"tbody\", _hoisted_14, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredItems, item => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: item.id\n    }, [_createElementVNode(\"th\", null, _toDisplayString(item.id), 1 /* TEXT */), _createElementVNode(\"th\", null, _toDisplayString(item.name), 1 /* TEXT */), _createElementVNode(\"th\", null, _toDisplayString(item.contact), 1 /* TEXT */), _createElementVNode(\"th\", null, _toDisplayString(item.address), 1 /* TEXT */), _createElementVNode(\"th\", null, [_createVNode(_component_router_link, {\n      to: '/update-restaurant/' + item.id\n    }, {\n      default: _withCtx(() => [_createVNode(_component_font_awesome_icon, {\n        icon: \"pen\"\n      })]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"]), _createTextVNode(\" | \"), _createElementVNode(\"a\", {\n      onClick: $event => $options.deleteRestaurant(item.id),\n      href: \"#\"\n    }, [_createVNode(_component_font_awesome_icon, {\n      icon: \"trash\"\n    })], 8 /* PROPS */, _hoisted_15)])]);\n  }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(\"tbody\", _hoisted_16, _hoisted_18))])]), _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.pages, page => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: page,\n      onClick: $event => $data.currentPage = page,\n      class: _normalizeClass({\n        active: $data.currentPage === page\n      })\n    }, _toDisplayString(page), 11 /* TEXT, CLASS, PROPS */, _hoisted_19);\n  }), 128 /* KEYED_FRAGMENT */))])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","style","scope","colspan","_hoisted_17","_createVNode","_component_Header","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","$data","restaurant","length","_component_confirm_dialogue","ref","type","searchQuery","$event","placeholder","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","onClick","_cache","$options","sortBy","_hoisted_13","filteredItems","_createElementBlock","_hoisted_14","_Fragment","_renderList","item","key","id","name","contact","address","_component_router_link","to","_component_font_awesome_icon","icon","deleteRestaurant","href","_hoisted_16","_hoisted_18","pages","page","currentPage","_normalizeClass","active","_hoisted_19"],"sources":["/Applications/MAMP/htdocs/Vue/Demo/restaurant-app/restaurent-app/src/components/Home.vue"],"sourcesContent":["<template>\n    <Header></Header>\n    <div class=\"container mt-10\">\n        <div class=\"row justify-content-center\">\n            <div class=\"col-md-4 col-xl-3\">\n                <div class=\"card bg-c-blue order-card\">\n                    <div class=\"card-block\">\n                        <h6 class=\"m-b-20\">Total restaurant</h6>\n                        <h2 class=\"text-right\"><i class=\"fa fa-cart-plus f-left\"></i><span>{{ restaurant.length }}</span></h2>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <confirm-dialogue ref=\"confirmDialogue\"></confirm-dialogue>\n    <div>\n        <input type=\"text\" v-model=\"searchQuery\" placeholder=\"Search\">\n    </div>\n<div class=\"container\">\n    <table class=\"table\">\n        <thead  class=\"table-dark\">\n            <tr>\n                <th style=\"border-top-left-radius: 15px 15px;\" scope=\"col\">#</th>\n                <th  @click=\"sortBy('name')\" scope=\"col\">Name</th>\n                <th  @click=\"sortBy('contact')\" scope=\"col\">Contact</th>\n                <th  @click=\"sortBy('address')\" scope=\"col\">Address</th>\n                <th scope=\"col\">Action</th>\n            </tr>\n        </thead>\n            <tbody v-if=\"filteredItems.length > 0 \">\n                <tr v-for=\"item in filteredItems\" :key=item.id>\n                        <th>{{item.id}}</th>\n                        <th>{{item.name}}</th>\n                        <th>{{item.contact}}</th>\n                        <th>{{item.address}}</th>\n                        <th><router-link :to=\"'/update-restaurant/'+item.id\"> <font-awesome-icon icon=\"pen\" />\n                        </router-link>  |  <a @click=\"deleteRestaurant(item.id)\" href=\"#\"><font-awesome-icon icon=\"trash\" /></a> </th>\n                </tr>\n            </tbody>\n            <tbody v-else>\n                <tr class=\"no-records-found\">\n                    <td colspan=\"5\">No matching records found</td>\n                </tr>\n            </tbody>\n    </table>\n</div>\n    <ul>\n        <li v-for=\"page in pages\" :key=\"page\" @click=\"currentPage = page\" :class=\"{ active: currentPage === page }\">\n            {{ page }}\n        </li>\n    </ul>\n</template>\n<script>\n\nimport {toast} from \"vue3-toastify\";\nimport Header from \"@/components/Header.vue\";\nimport axios from \"axios\";\nimport ConfirmDialogue from \"@/components/ConfirmDialogue.vue\";\nexport default {\n    name:\"Home\",\n    components : {\n        ConfirmDialogue,\n        Header\n    },\n    computed:{\n        pages() {\n            let pages = [];\n            for (let i = 1; i <= Math.ceil(this.restaurant.length / this.itemsPerPage); i++) {\n                pages.push(i);\n            }\n            return pages;\n        },\n        filteredItems() {\n\n            const filteredData =  this.restaurant.filter(user => {\n                return user.name.toLowerCase().includes(this.searchQuery.toLowerCase()) ||\n                    user.contact.toLowerCase().includes(this.searchQuery.toLowerCase()) ||\n                    user.address.toLowerCase().includes(this.searchQuery.toLowerCase());\n            });\n\n            const start = (this.currentPage - 1) * this.itemsPerPage;\n            const end = start + this.itemsPerPage;\n            const filterData =  filteredData.slice(start, end);\n\n            return filterData.sort((a, b) => {\n                let modifier = 1;\n                if (this.sortDirection === 'desc') modifier = -1;\n                if (a[this.sortKey] < b[this.sortKey]) return -1 * modifier;\n                if (a[this.sortKey] > b[this.sortKey]) return 1 * modifier;\n                return 0;\n            });\n        },\n    },\n    data(){\n        return{\n            name :'',\n            restaurant : [],\n            currentPage: 1,\n            itemsPerPage: 5,\n            searchQuery: '',\n            sortKey: 'name',\n            sortDirection: 'asc',\n        }\n    },\n    mounted() {\n        this.loadData()\n    },\n    methods:{\n        async deleteRestaurant(id){\n            const ok = await this.$refs.confirmDialogue.show({\n                title: 'Delete record ?',\n                message: 'Are you sure you want to delete this page? It cannot be undone.',\n                okButton: 'Delete Forever',\n            })\n            if (ok) {\n                let result = await axios.delete(\"http://192.168.1.250:3000/restaurant/\"+id)\n                if(result.status === 200){\n                    toast.success('Record deleted successfully.');\n                    await this.$router.push({name: 'Home'})\n                    this.loadData()\n                }\n            }\n\n        },\n        async loadData(){\n            let user = localStorage.getItem('userInfo');\n            this.name = JSON.parse(user).name;\n            if(!user){\n                this.$router.push({name: 'Login'})\n            }\n            let result = await axios.get(\"http://192.168.1.250:3000/restaurant\");\n            this.restaurant = result.data\n        },\n        onClickHandler(page)  {\n            console.log(page);\n        },\n        sortBy(key) {\n            if (this.sortKey === key) {\n                this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';\n            } else {\n                this.sortKey = key;\n                this.sortDirection = 'asc';\n            }\n        },\n    },\n}\n</script>\n<style>\nul {\n    list-style-type: none;\n    padding: 0;\n    margin: 0;\n}\n\nli {\n    display: inline-block;\n    padding: 10px;\n    border: 1px solid #ccc;\n    margin-right: 5px;\n    cursor: pointer;\n}\n\nli.active {\n    background-color: #ccc;\n}\n\n.VueCarousel-slide {\n    height:100px;\n    color:#FFF;\n    background:#59ecff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-right:1px solid #FFF;\n    box-sizing:border-box;\n    font-size:12px;\n    text-align:center;\n}\n.example-slide {\n    align-items: center;\n    background-color: #666;\n    color: #999;\n    display: flex;\n    font-size: 1.5rem;\n    justify-content: center;\n    min-height: 10rem;\n}\n.mt-10{\n    margin-top: 10px;\n}\n.order-card {\n    color: #fff;\n}\n\n.bg-c-blue {\n    background: linear-gradient(45deg,#4099ff,#73b4ff);\n}\n\n.bg-c-green {\n    background: linear-gradient(45deg,#2ed8b6,#59e0c5);\n}\n\n.bg-c-yellow {\n    background: linear-gradient(45deg,#FFB64D,#ffcb80);\n}\n\n.bg-c-pink {\n    background: linear-gradient(45deg,#FF5370,#ff869a);\n}\n\n\n.card {\n    border-radius: 5px;\n    -webkit-box-shadow: 0 1px 2.94px 0.06px rgba(4,26,55,0.16);\n    box-shadow: 0 1px 2.94px 0.06px rgba(4,26,55,0.16);\n    border: none;\n    margin-bottom: 30px;\n    -webkit-transition: all 0.3s ease-in-out;\n    transition: all 0.3s ease-in-out;\n}\n\n.card .card-block {\n    padding: 25px;\n}\n\n.order-card i {\n    font-size: 26px;\n}\n\n.f-left {\n    float: left;\n}\n\n.f-right {\n    float: right;\n}\n.pagination-container {\n    display: flex;\n    column-gap: 10px;\n}\n.paginate-buttons {\n    height: 40px;\n    width: 40px;\n    border-radius: 20px;\n    cursor: pointer;\n    background-color: rgb(242, 242, 242);\n    border: 1px solid rgb(217, 217, 217);\n    color: black;\n}\n.paginate-buttons:hover {\n    background-color: #d8d8d8;\n}\n.active-page {\n    background-color: #3498db;\n    border: 1px solid #3498db;\n    color: white;\n}\n.active-page:hover {\n    background-color: #2988c8;\n}\n\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}